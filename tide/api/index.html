
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for Single Digital Presence">
      
      
      
      
        <link rel="canonical" href="https://dpc-sdp.github.io/sdp-docs/tide/api/">
      
      <link rel="icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.3.1">
    
    
      
        <title>API - Single Digital Presence</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.1c75ef36.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tide-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Single Digital Presence" class="md-header__button md-logo" aria-label="Single Digital Presence" data-md-component="logo">
      
  <img src="../../images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Single Digital Presence
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/dpc-sdp/sdp-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dpc-sdp/sdp-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Single Digital Presence" class="md-nav__button md-logo" aria-label="Single Digital Presence" data-md-component="logo">
      
  <img src="../../images/logo.svg" alt="logo">

    </a>
    Single Digital Presence
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/dpc-sdp/sdp-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dpc-sdp/sdp-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../working-with-sdp/" class="md-nav__link">
        Working with SDP
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../terminology/" class="md-nav__link">
        Terminology
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Bay
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Bay" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Bay
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bay/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bay/onboarding/" class="md-nav__link">
        Onboarding *
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bay/environment-variables/" class="md-nav__link">
        Environment Variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bay/preview-environments/" class="md-nav__link">
        Preview environments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bay/search/" class="md-nav__link">
        Search *
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Tide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tide" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Tide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/" class="md-nav__link">
        Modules
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        API
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-jsonapi" class="md-nav__link">
    Why JSONAPI?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#drupal-jsonapi-and-related-modules" class="md-nav__link">
    Drupal JSONAPI and related modules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#endpoints-example" class="md-nav__link">
    Endpoints example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#request-flow" class="md-nav__link">
    Request flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#end-to-end-url-resolution" class="md-nav__link">
    End-to-end URL resolution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#router-api-endpoint" class="md-nav__link">
    Router API endpoint
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referenced-entities" class="md-nav__link">
    Referenced entities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#drupal-caching" class="md-nav__link">
    Drupal caching
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sites-sections/" class="md-nav__link">
        Sites and sections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fields-components/" class="md-nav__link">
        Fields and components
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Ripple
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Ripple" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Ripple
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ripple/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ripple/components/" class="md-nav__link">
        Components
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ripple/api/" class="md-nav__link">
        API *
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ripple/search/" class="md-nav__link">
        Search *
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ripple/content-data-flow/" class="md-nav__link">
        Content data flow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ripple/setup/" class="md-nav__link">
        Setup new site *
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Development" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2" type="checkbox" id="__nav_9_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2">
          Content Repository
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Content Repository" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_2">
          <span class="md-nav__icon md-icon"></span>
          Content Repository
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/content-repository/setup/" class="md-nav__link">
        Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/content-repository/local-development-environment/" class="md-nav__link">
        Local development environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/content-repository/automated-builds/" class="md-nav__link">
        Automated builds
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/content-repository/coding-standards/" class="md-nav__link">
        Coding standards
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/content-repository/module-development/" class="md-nav__link">
        Module Development
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/content-repository/readme-file/" class="md-nav__link">
        README.md file
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_3" type="checkbox" id="__nav_9_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_3">
          Frontend Website
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Frontend Website" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_3">
          <span class="md-nav__icon md-icon"></span>
          Frontend Website
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/frontend-website/setup/" class="md-nav__link">
        Setup *
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/frontend-website/style-guide/" class="md-nav__link">
        Style guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/frontend-website/local-development-environment/" class="md-nav__link">
        Local development environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/frontend-website/automated-builds/" class="md-nav__link">
        Automated builds
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/frontend-website/coding-standards/" class="md-nav__link">
        Coding standards
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/frontend-website/component-development/" class="md-nav__link">
        Component Development *
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/frontend-website/readme-file/" class="md-nav__link">
        README.md file
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/workflow/" class="md-nav__link">
        Development workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/code-review/" class="md-nav__link">
        Code review
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/release/" class="md-nav__link">
        Release management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/accessibility/" class="md-nav__link">
        Accessibility
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/documentation/" class="md-nav__link">
        Maintaining this documentation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-jsonapi" class="md-nav__link">
    Why JSONAPI?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#drupal-jsonapi-and-related-modules" class="md-nav__link">
    Drupal JSONAPI and related modules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#endpoints-example" class="md-nav__link">
    Endpoints example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#request-flow" class="md-nav__link">
    Request flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#end-to-end-url-resolution" class="md-nav__link">
    End-to-end URL resolution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#router-api-endpoint" class="md-nav__link">
    Router API endpoint
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referenced-entities" class="md-nav__link">
    Referenced entities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#drupal-caching" class="md-nav__link">
    Drupal caching
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="tide-api">Tide API<a class="headerlink" href="#tide-api" title="Permanent link">&para;</a></h1>
<p>Content API is built from a set of contributed modules and custom code provided
through <a href="https://github.com/dpc-sdp/tide_api">Tide API</a> module.</p>
<h2 id="why-jsonapi">Why JSONAPI?<a class="headerlink" href="#why-jsonapi" title="Permanent link">&para;</a></h2>
<p>Why we selected <a href="http://jsonapi.org/">JSONAPI standard</a> over generic REST 
provided by Drupal core:</p>
<ul>
<li>JSON is a standard of REST, a subset of generic REST rules. </li>
<li>JSONAPI allows to query individual items and collections. 
  Drupal JSONAPI module automatically exposes entities as endpoints. Because 
  most of functionality is implement as entities in Drupal 8, there is no 
  need for custom code to expose required features. </li>
<li>JSONAPI is a newer format</li>
<li>JSONAPI will be included in Drupal core.
  Documentation on using Drupal JSONAPI module: <a href="https://www.drupal">https://www.drupal</a>
  .org/docs/8/modules/json-api </li>
</ul>
<p>It is assumed that API consumers support the following:</p>
<ul>
<li>Can traverse data.</li>
<li>Can cache based on response headers. </li>
<li>Can resolve relationships by following links. </li>
</ul>
<h2 id="drupal-jsonapi-and-related-modules">Drupal JSONAPI and related modules<a class="headerlink" href="#drupal-jsonapi-and-related-modules" title="Permanent link">&para;</a></h2>
<p><a href="https://www.drupal.org/project/jsonapi">jsonapi</a> - main module that exposes 
entities as endpoints and provides support for REST operations. </p>
<p><a href="https://www.drupal.org/project/jsonapi_extras">jsonapi_extras</a> - helper module to alter
JSONAPI config: endpoints prefix (we are using <code>/api/v1</code>) and enable/disable
endpoints for automatically exposed entities (we use this to limit access to
internal entities). </p>
<h2 id="endpoints-example">Endpoints example<a class="headerlink" href="#endpoints-example" title="Permanent link">&para;</a></h2>
<p>While providing a list of all endpoints would be to publish whole Drupal API 
(which is neither maintainable no required), the example page below demonstrates
how Frontend Website can be mapped to Content Repository endpoints.</p>
<p><img alt="Page built using API data" src="../../assets/api-page-example.png" /></p>
<table>
<thead>
<tr>
<th></th>
<th>Component</th>
<th>Content API endpoint</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>route</td>
<td><code>/api/v1/route?alias=&lt;alias&gt;</code></td>
<td>Given an alias, returns information about current route, including entity UUID.</td>
</tr>
<tr>
<td>2</td>
<td>main menu</td>
<td><code>/api/v1/menu_link_content/menu_link_content?filter[menu_name][value]=main</code></td>
<td></td>
</tr>
<tr>
<td>3</td>
<td>banner</td>
<td>TBD</td>
<td>If exposed as a block - use block-based endpoint. If exposed as a content field - use entity endpoint with inclusion.</td>
</tr>
<tr>
<td>4</td>
<td>breadcrumbs</td>
<td>TBD</td>
<td>Not supported out of the box. May need to use main menu to build breadcrumbs by Frontend Website.</td>
</tr>
<tr>
<td>5</td>
<td>content</td>
<td><code>/api/v1/page/&lt;UUID&gt;?include=field_page_paragraph</code></td>
<td>Can be combined with 6</td>
</tr>
<tr>
<td>6</td>
<td>related content</td>
<td><code>/api/v1/page/&lt;UUID&gt;?include=field_related_content</code></td>
<td>Can be combined with 5</td>
</tr>
<tr>
<td>7</td>
<td>share block</td>
<td><code>/api/v1/block_content/share_block</code></td>
<td>Content is a static HTML</td>
</tr>
<tr>
<td>8</td>
<td>was this page helpful</td>
<td>TBD</td>
<td>Posting of webform submissions is not supported. Custom module may be required.</td>
</tr>
<tr>
<td>9</td>
<td>footer main menu</td>
<td><code>/api/v1/menu_link_content/menu_link_content?filter[menu_name][value]=main</code></td>
<td></td>
</tr>
<tr>
<td>10</td>
<td>copyright</td>
<td><code>/api/v1/block_content/copyright</code></td>
<td>Content is a static HTML</td>
</tr>
<tr>
<td>11</td>
<td>footer menu</td>
<td><code>/api/v1/menu_link_content/menu_link_content?filter[menu_name][value]=footer</code></td>
<td></td>
</tr>
<tr>
<td>12</td>
<td>Sites information</td>
<td><code>/api/v1/taxonomy_term/sites</code></td>
<td>Allows to retrieve custom site information stored in the Content Repository</td>
</tr>
<tr>
<td>13</td>
<td>Router</td>
<td><code>/api/v1/router</code></td>
<td>Alias lookup. May be required for ad-hoc queries from Frontend Website.</td>
</tr>
</tbody>
</table>
<h2 id="request-flow">Request flow<a class="headerlink" href="#request-flow" title="Permanent link">&para;</a></h2>
<p>The diagram below demonstrates how a single page is assembled by VueJS/Nuxt when
hitting multiple endpoints.</p>
<p>VueJS/Nuxt retrieves site information and caches it internally until the next cache
clear. Each Frontend Website has only site UUID (taxonomy term UUID from <code>Site</code>
vocabulary) hardcoded. The rest of configuration comes from taxonomy term: logo,
slogan, footer text, main menu name, footer menu name. This information is later
used in follow-up requests to retrieve relevant information. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since Frontend Websites information is stored using fieldsable taxonomy terms,
it is possible to add more fields to capture site information in the Content
Repository. The data stored in these fields will become automatically 
exposed through API.</p>
<p>See <a href="../sites-sections/">Sites and sections</a> for more information about 
organising per-site information.</p>
</div>
<p><em>Content API Content</em>, <em>Content API Menu</em>, and <em>Content API Block</em> are shown
here as separated endpoints (they are indeed separate), but are handled by the
same internal entity controller from JSONAPI Drupal module. The content is
filtered by <em>Content API Filter</em> based on provided site and path query
parameters. If no site or path is provided the request is considered invalid and
an error response is returned. <em>Content API Filter</em> is a thin layer (e.g.
request event listener) in front of all JSONAPI endpoints. For example, if the
content exists, but is not assigned to a site or section, it is considered as
non-existing content when accessed from this site.</p>
<p><em>Internal Router</em> is a mechanism to lookup internal path by provided alias.
There is a similar functionality with a <em>Router Endpoint</em>, but it resolves
aliases without additional Drupal-to-Drupal request.</p>
<p><a href="../../assets/api-parallel-requests.png"> <img alt="" src="../../assets/api-parallel-requests.png" /> </a></p>
<h2 id="end-to-end-url-resolution">End-to-end URL resolution<a class="headerlink" href="#end-to-end-url-resolution" title="Permanent link">&para;</a></h2>
<p>The diagram below describes how URL requested by a web browser is resolved by
Drupal and served by VueJS/Nuxt. It covers both front-end and back-end mechanisms.</p>
<p>To leverage JSONAPI module in Drupal, we are using <em>API Router</em> to resolve
requested paths to a set of information about the route (UUID, content type,
path, alias). This information then used by <em>Client API path builder</em> to
assemble a path to then send a second request to the JSONAPI endpoint.</p>
<p>It is important to note that due to how content links can be provided within
content, the path resolution within <em>API Router</em> should be able to find the best
match from either path or alias provided. For example,
paths <code>about-us</code>, <code>/about-us</code>, <code>node/123</code>, <code>/node/123</code> should all resolve to
UUID of <em>About Us</em> page. When matched entity found, <em>API Router</em> also checks if it
has the specified site assigned and returns an error if this path is not
available. Also, <em>API Router</em> has all lookups cached in Drupal's dynamic cache, 
which is tagged with cache tags (so that the cache for path is cleared
when entity is updated).</p>
<p><a href="../../assets/api-end-to-end-url-resolution.png"> <img alt="" src="../../assets/api-end-to-end-url-resolution.png" /> </a></p>
<h2 id="router-api-endpoint">Router API endpoint<a class="headerlink" href="#router-api-endpoint" title="Permanent link">&para;</a></h2>
<p>To control content aliases from Drupal and resolve requests
coming from Browser into Frontend Website, a special <em>Router</em> endpoint exists to perform a
lookup on provided path. Because the provided path can be either internal Drupal
path or an alias, the lookup searches through all existing aliases and internal
paths. </p>
<p>When non-existing alias is provided, the endpoint returns an error according to
JSONAPI specification. </p>
<p><em>Router API</em> also allows to filter by site if site URL query parameter is
provided. </p>
<h2 id="referenced-entities">Referenced entities<a class="headerlink" href="#referenced-entities" title="Permanent link">&para;</a></h2>
<p>JSONAPI supports including referenced entities in response by using <code>include</code>
query parameter and a comma-separated list of entity reference fields. For
example, <code>/api/v1/page/&lt;UUID&gt;?include=field_page_paragraph</code>.</p>
<h2 id="drupal-caching">Drupal caching<a class="headerlink" href="#drupal-caching" title="Permanent link">&para;</a></h2>
<p>Response headers pass-through Drupal-generated cache tags. This means that 
reverse proxies can bind to Drupal cache tags and invalidate their caches
as soon as Drupal caches become invalid.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../modules/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Modules" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Modules
            </div>
          </div>
        </a>
      
      
        
        <a href="../sites-sections/" class="md-footer__link md-footer__link--next" aria-label="Next: Sites and sections" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Sites and sections
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 Department of Premier and Cabinet of Victoria
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/dpc-sdp" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.e99e714c.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c7d1b464.min.js"></script>
      
    
  </body>
</html>